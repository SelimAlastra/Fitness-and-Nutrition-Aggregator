{"ast":null,"code":"\"use strict\"; // Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultTransporter = void 0;\n\nconst gaxios_1 = require(\"gaxios\");\n\nconst options_1 = require(\"./options\"); // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\nconst pkg = require('../../package.json');\n\nconst PRODUCT_NAME = 'google-api-nodejs-client';\n\nclass DefaultTransporter {\n  /**\r\n   * Configures request options before making a request.\r\n   * @param opts GaxiosOptions options.\r\n   * @return Configured options.\r\n   */\n  configure(opts = {}) {\n    opts.headers = opts.headers || {};\n\n    if (typeof window === 'undefined') {\n      // set transporter user agent if not in browser\n      const uaValue = opts.headers['User-Agent'];\n\n      if (!uaValue) {\n        opts.headers['User-Agent'] = DefaultTransporter.USER_AGENT;\n      } else if (!uaValue.includes(`${PRODUCT_NAME}/`)) {\n        opts.headers['User-Agent'] = `${uaValue} ${DefaultTransporter.USER_AGENT}`;\n      } // track google-auth-library-nodejs version:\n\n\n      const authVersion = `auth/${pkg.version}`;\n\n      if (opts.headers['x-goog-api-client'] && !opts.headers['x-goog-api-client'].includes(authVersion)) {\n        opts.headers['x-goog-api-client'] = `${opts.headers['x-goog-api-client']} ${authVersion}`;\n      } else if (!opts.headers['x-goog-api-client']) {\n        const nodeVersion = process.version.replace(/^v/, '');\n        opts.headers['x-goog-api-client'] = `gl-node/${nodeVersion} ${authVersion}`;\n      }\n    }\n\n    return opts;\n  }\n\n  request(opts, callback) {\n    // ensure the user isn't passing in request-style options\n    opts = this.configure(opts);\n\n    try {\n      options_1.validate(opts);\n    } catch (e) {\n      if (callback) {\n        return callback(e);\n      } else {\n        throw e;\n      }\n    }\n\n    if (callback) {\n      gaxios_1.request(opts).then(r => {\n        callback(null, r);\n      }, e => {\n        callback(this.processError(e));\n      });\n    } else {\n      return gaxios_1.request(opts).catch(e => {\n        throw this.processError(e);\n      });\n    }\n  }\n  /**\r\n   * Changes the error to include details from the body.\r\n   */\n\n\n  processError(e) {\n    const res = e.response;\n    const err = e;\n    const body = res ? res.data : null;\n\n    if (res && body && body.error && res.status !== 200) {\n      if (typeof body.error === 'string') {\n        err.message = body.error;\n        err.code = res.status.toString();\n      } else if (Array.isArray(body.error.errors)) {\n        err.message = body.error.errors.map(err2 => err2.message).join('\\n');\n        err.code = body.error.code;\n        err.errors = body.error.errors;\n      } else {\n        err.message = body.error.message;\n        err.code = body.error.code || res.status;\n      }\n    } else if (res && res.status >= 400) {\n      // Consider all 4xx and 5xx responses errors.\n      err.message = body;\n      err.code = res.status.toString();\n    }\n\n    return err;\n  }\n\n}\n\nexports.DefaultTransporter = DefaultTransporter;\n/**\r\n * Default user agent.\r\n */\n\nDefaultTransporter.USER_AGENT = `${PRODUCT_NAME}/${pkg.version}`;","map":{"version":3,"sources":["C:/Users/ibott/MajorGroupProject/node_modules/google-auth-library/build/src/transporters.js"],"names":["Object","defineProperty","exports","value","DefaultTransporter","gaxios_1","require","options_1","pkg","PRODUCT_NAME","configure","opts","headers","window","uaValue","USER_AGENT","includes","authVersion","version","nodeVersion","process","replace","request","callback","validate","e","then","r","processError","catch","res","response","err","body","data","error","status","message","code","toString","Array","isArray","errors","map","err2","join"],"mappings":"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","sourcesContent":["\"use strict\";\r\n// Copyright 2019 Google LLC\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//      http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultTransporter = void 0;\r\nconst gaxios_1 = require(\"gaxios\");\r\nconst options_1 = require(\"./options\");\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst pkg = require('../../package.json');\r\nconst PRODUCT_NAME = 'google-api-nodejs-client';\r\nclass DefaultTransporter {\r\n    /**\r\n     * Configures request options before making a request.\r\n     * @param opts GaxiosOptions options.\r\n     * @return Configured options.\r\n     */\r\n    configure(opts = {}) {\r\n        opts.headers = opts.headers || {};\r\n        if (typeof window === 'undefined') {\r\n            // set transporter user agent if not in browser\r\n            const uaValue = opts.headers['User-Agent'];\r\n            if (!uaValue) {\r\n                opts.headers['User-Agent'] = DefaultTransporter.USER_AGENT;\r\n            }\r\n            else if (!uaValue.includes(`${PRODUCT_NAME}/`)) {\r\n                opts.headers['User-Agent'] = `${uaValue} ${DefaultTransporter.USER_AGENT}`;\r\n            }\r\n            // track google-auth-library-nodejs version:\r\n            const authVersion = `auth/${pkg.version}`;\r\n            if (opts.headers['x-goog-api-client'] &&\r\n                !opts.headers['x-goog-api-client'].includes(authVersion)) {\r\n                opts.headers['x-goog-api-client'] = `${opts.headers['x-goog-api-client']} ${authVersion}`;\r\n            }\r\n            else if (!opts.headers['x-goog-api-client']) {\r\n                const nodeVersion = process.version.replace(/^v/, '');\r\n                opts.headers['x-goog-api-client'] = `gl-node/${nodeVersion} ${authVersion}`;\r\n            }\r\n        }\r\n        return opts;\r\n    }\r\n    request(opts, callback) {\r\n        // ensure the user isn't passing in request-style options\r\n        opts = this.configure(opts);\r\n        try {\r\n            options_1.validate(opts);\r\n        }\r\n        catch (e) {\r\n            if (callback) {\r\n                return callback(e);\r\n            }\r\n            else {\r\n                throw e;\r\n            }\r\n        }\r\n        if (callback) {\r\n            gaxios_1.request(opts).then(r => {\r\n                callback(null, r);\r\n            }, e => {\r\n                callback(this.processError(e));\r\n            });\r\n        }\r\n        else {\r\n            return gaxios_1.request(opts).catch(e => {\r\n                throw this.processError(e);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Changes the error to include details from the body.\r\n     */\r\n    processError(e) {\r\n        const res = e.response;\r\n        const err = e;\r\n        const body = res ? res.data : null;\r\n        if (res && body && body.error && res.status !== 200) {\r\n            if (typeof body.error === 'string') {\r\n                err.message = body.error;\r\n                err.code = res.status.toString();\r\n            }\r\n            else if (Array.isArray(body.error.errors)) {\r\n                err.message = body.error.errors\r\n                    .map((err2) => err2.message)\r\n                    .join('\\n');\r\n                err.code = body.error.code;\r\n                err.errors = body.error.errors;\r\n            }\r\n            else {\r\n                err.message = body.error.message;\r\n                err.code = body.error.code || res.status;\r\n            }\r\n        }\r\n        else if (res && res.status >= 400) {\r\n            // Consider all 4xx and 5xx responses errors.\r\n            err.message = body;\r\n            err.code = res.status.toString();\r\n        }\r\n        return err;\r\n    }\r\n}\r\nexports.DefaultTransporter = DefaultTransporter;\r\n/**\r\n * Default user agent.\r\n */\r\nDefaultTransporter.USER_AGENT = `${PRODUCT_NAME}/${pkg.version}`;\r\n//# sourceMappingURL=transporters.js.map"]},"metadata":{},"sourceType":"script"}